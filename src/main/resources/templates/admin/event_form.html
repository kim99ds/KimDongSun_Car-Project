<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="content" class="admin-event">
    <link rel="stylesheet" th:href="@{/css/admin_event_upload.css}">

    <div class="upload-page">
        <div class="page-header">
            <div>
                <div class="page-title" th:text="${mode} == 'edit' ? '이벤트 수정' : '이벤트 등록'">이벤트 등록</div>
                <div class="page-sub">프로모션/할인/추천 등 이벤트 정보를 등록하고 노출합니다.</div>
            </div>
            <div class="header-actions">
                <a class="btn secondary" th:href="@{/admin/event_manage(tab='events')}">목록</a>
            </div>
        </div>

        <div class="upload-card">
            <form th:action="${mode} == 'edit' ? @{'/admin/event_manage/events/' + ${eventId} + '/edit'} : @{/admin/event_manage/events/new}"
                  method="post"
                  th:object="${eventForm}">

                <input type="hidden" name="mode" th:value="${mode}">
                <input type="hidden" name="eventId" th:if="${mode}=='edit'" th:value="${eventId}">

                <div class="form-grid">
                    <div class="form-group">
                        <label class="label" for="title">이벤트명</label>
                        <input id="title" class="input" type="text" th:field="*{title}" placeholder="예: 1월 프로모션 (신차 구매 지원)">
                        <p class="hint">관리자용 제목입니다. 사용자 노출 제목과 동일하게 사용됩니다.</p>
                    </div>

                    <div class="form-group">
                        <label class="label" for="active">상태</label>
                        <select id="active" class="select" th:field="*{active}">
                            <option th:value="true">노출</option>
                            <option th:value="false">비노출</option>
                        </select>
                        <p class="hint">노출 상태일 때 사용자 페이지에 보여집니다.</p>
                    </div>

                    <div class="form-group">
                        <label class="label" for="startAt">시작일</label>
                        <input id="startAt" class="input" type="datetime-local" th:field="*{startAt}">
                    </div>

                    <div class="form-group">
                        <label class="label" for="endAt">종료일</label>
                        <input id="endAt" class="input" type="datetime-local" th:field="*{endAt}">
                    </div>

                    <div class="form-group full">
                        <label class="label" for="bannerUrl">배너 이미지 URL</label>
                        <!-- name must stay bannerImage for backend binding -->
                        <input id="bannerUrl" class="input" type="text" th:field="*{bannerImage}" placeholder="https://.../banner.jpg">
                        <p class="hint">외부 URL 또는 정적 리소스 경로(/images/...)를 입력하세요.</p>

                        <div class="preview" th:if="*{bannerImage} != null and !#strings.isEmpty(*{bannerImage})">
                            <img class="preview-img" th:src="*{bannerImage}" alt="banner preview">
                        </div>
                    </div>

                    <div class="form-group full">
                        <label class="label" for="description">설명</label>
                        <textarea id="description" class="textarea" rows="6" th:field="*{description}"
                                  placeholder="이벤트 상세 설명을 입력하세요."></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn primary" th:text="${mode} == 'edit' ? '수정 저장' : '등록'">등록</button>
                    <a class="btn secondary" th:href="@{/admin/event_manage(tab='events')}">취소</a>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
</html>
